{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/kiyotoka/Desktop/PRANA/components/hospital/LiveCityMapInner.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport 'leaflet/dist/leaflet.css';\nimport { Coordinates } from '@/lib/types';\nimport L from 'leaflet';\n\nexport interface LiveCityMapInnerProps {\n  hospitalLocation: Coordinates | null;\n  className?: string;\n}\n\nexport function LiveCityMapInner({ hospitalLocation, className }: LiveCityMapInnerProps) {\n  useEffect(() => {\n    if (typeof window === 'undefined' || !hospitalLocation) return;\n    \n    // Default config to center on Bangalore\n    const defaultLocation: [number, number] = [12.9716, 77.5946];\n    const centerObj: [number, number] = hospitalLocation ? [hospitalLocation.latitude, hospitalLocation.longitude] : defaultLocation;\n\n    // Check if map container is already initialized to fix hot-reloading errors\n    const container = L.DomUtil.get('hospital-city-map');\n    if (container != null && (container as any)._leaflet_id !== null) {\n      (container as any)._leaflet_id = null;\n    }\n\n    // Create map\n    const newMap = L.map('hospital-city-map', {\n      zoomControl: false,\n      attributionControl: false\n    }).setView(centerObj, 14);\n\n      // Dark style perfectly matching image \n      L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {\n         maxZoom: 19,\n      }).addTo(newMap);\n\n      // Hospital Marker with Pulse\n      const hospIcon = L.divIcon({\n        className: 'custom-hosp-marker',\n        html: `<div style=\"background-color: #ef4444; border: 4px solid white; border-radius: 4px; padding: 4px; box-shadow: 0 0 15px rgba(239, 68, 68, 0.8), 0 0 30px rgba(239, 68, 68, 0.4); width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;\"><div style=\"background: white; width: 100%; height: 25%; position: absolute;\"></div><div style=\"background: white; width: 25%; height: 100%; position: absolute;\"></div></div>`,\n        iconSize: [40, 40],\n        iconAnchor: [20, 20],\n      });\n      L.marker(centerObj, { icon: hospIcon }).addTo(newMap);\n\n      // Draw fake routes for map effect matching design\n      const drawMockRoute = (pathCoords: [number, number][], color: string) => {\n         L.polyline(pathCoords, { color, weight: 4, opacity: 0.9 }).addTo(newMap);\n         \n         // Intersections\n         pathCoords.forEach(c => {\n           L.circleMarker(c, {\n              radius: 5, color: '#9ca3af', fillColor: '#1f2937', fillOpacity: 1, weight: 2\n           }).addTo(newMap);\n         })\n         \n         // Ambo maker start\n         L.circleMarker(pathCoords[pathCoords.length - 1], {\n             radius: 8, color: color, fillColor: color, fillOpacity: 1, weight: 2\n         }).addTo(newMap);\n      }\n\n      // Red Route\n      drawMockRoute([centerObj, [centerObj[0] + 0.015, centerObj[1] - 0.005], [centerObj[0] + 0.02, centerObj[1] - 0.015]], '#ef4444');\n      drawMockRoute([centerObj, [centerObj[0] - 0.015, centerObj[1] + 0.005], [centerObj[0] - 0.025, centerObj[1] + 0.01]], '#ef4444');\n      \n      // Blue Route\n      drawMockRoute([centerObj, [centerObj[0] - 0.01, centerObj[1] - 0.015], [centerObj[0] - 0.02, centerObj[1] - 0.02], [centerObj[0] - 0.03, centerObj[1] - 0.025]], '#3b82f6');\n      drawMockRoute([centerObj, [centerObj[0] + 0.01, centerObj[1] + 0.02], [centerObj[0] + 0.02, centerObj[1] + 0.03]], '#3b82f6');\n      \n      // Green Route\n      drawMockRoute([centerObj, [centerObj[0] - 0.015, centerObj[1] + 0.015], [centerObj[0] - 0.02, centerObj[1] + 0.02]], '#22c55e');\n      drawMockRoute([centerObj, [centerObj[0] + 0.005, centerObj[1] - 0.01], [centerObj[0] + 0.015, centerObj[1] - 0.02]], '#22c55e');\n\n      // Yellow Route\n      drawMockRoute([centerObj, [centerObj[0] - 0.005, centerObj[1] + 0.02], [centerObj[0] - 0.008, centerObj[1] + 0.03]], '#eab308');\n      drawMockRoute([centerObj, [centerObj[0] + 0.02, centerObj[1] - 0.025]], '#eab308');\n\n      return () => {\n        newMap.remove();\n        if (container != null) {\n          container.innerHTML = '';\n        }\n      };\n  }, [hospitalLocation]);\n\n  return (\n    <div className={className || \"w-full h-full relative\"}>\n       <div id=\"hospital-city-map\" className=\"w-full h-full rounded-xl overflow-hidden border-2 border-[#2b3346]\" style={{ zIndex: 1 }} />\n       <div className=\"absolute top-4 right-4 bg-[#1b2230]/90 border border-gray-600 px-4 py-2 rounded-lg backdrop-blur text-white font-bold text-xl tracking-wider shadow-xl z-[1000]\">\n           ETA: 3 MIN\n       </div>\n       <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-16 bg-[#2a3045]/90 px-4 py-2 rounded text-white font-bold tracking-wider shadow-lg z-[1000] border border-gray-600 whitespace-nowrap hidden lg:block\">\n           St. Mary's Hospital\n       </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}